<!DOCTYPE html>
<html>
<head>
<title>How's My Hair?</title>
<style>
video {
    border: 3px solid black;
    width: 480px;
    height: 360px;
    background-color: #333; /* Added a background for when the stream is loading */
}
button {
    font: 18px sans-serif;
    padding: 8px;
}
h1 {
	font: 64px sans-serif;
	text-align: center;
	font-weight: bold;
	text-shadow: 3px 3px 3px #00FF00;
}
h2 {
	font: 20px sans-serif;
	text-align: center;
}
</style>
</head>
<body>
<h1>How's My Hair?</h1>
<h2>The web's #1 utility for checking your hair.</h2>
<center>
	<video id="vid" autoplay playsinline></video>
	<br>
	<button id="btn" onclick="start()">Check Hair</button>
<script>
// Get references to the HTML elements
const video = document.getElementById("vid");
const btn = document.getElementById("btn");

// This function will be called when the button is clicked
async function start() {
  // Disable the button to prevent multiple clicks
  btn.disabled = true;

  // Check if the browser supports the MediaDevices API
  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    try {
      // Request access to the video stream.
      // This returns a promise that we await.
      const stream = await navigator.mediaDevices.getUserMedia({ 
        video: true 
      });

      // The stream was successfully obtained, so let's use it
      video.srcObject = stream;
      // The 'autoplay' attribute should handle this, but it's good practice
      // to call play() to ensure it starts on all platforms.
      video.play();

    } catch (error) {
      // The user denied access or another error occurred
      console.error("Error accessing the webcam: ", error);
      alert("Could not access the webcam. Please ensure you grant permission in your browser.");
      // Re-enable the button if access fails so the user can try again
      btn.disabled = false; 
    }
  } else {
    // The browser doesn't support the API
    alert("Sorry, your browser does not support the webcam API.");
  }
}
</script>
<br/>
<br/>
<p>Privacy guarantee: <b>Your hair is safe.</b> This image is not saved, shown, or otherwise displayed to anyone but you.</p>
</center>

</body>
</html>
